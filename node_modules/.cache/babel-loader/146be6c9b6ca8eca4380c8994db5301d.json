{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\nvar Stream = require('stream').Stream;\nvar util = require('util');\nmodule.exports = DelayedStream;\nfunction DelayedStream() {\n  this.source = null;\n  this.dataSize = 0;\n  this.maxDataSize = 1024 * 1024;\n  this.pauseStream = true;\n  this._maxDataSizeExceeded = false;\n  this._released = false;\n  this._bufferedEvents = [];\n}\nutil.inherits(DelayedStream, Stream);\nDelayedStream.create = function (source, options) {\n  var delayedStream = new this();\n  options = options || {};\n  for (var option in options) {\n    delayedStream[option] = options[option];\n  }\n  delayedStream.source = source;\n  var realEmit = source.emit;\n  source.emit = function () {\n    delayedStream._handleEmit(arguments);\n    return realEmit.apply(source, arguments);\n  };\n  source.on('error', function () {});\n  if (delayedStream.pauseStream) {\n    source.pause();\n  }\n  return delayedStream;\n};\nDelayedStream.prototype.__defineGetter__('readable', function () {\n  return this.source.readable;\n});\nDelayedStream.prototype.resume = function () {\n  if (!this._released) {\n    this.release();\n  }\n  this.source.resume();\n};\nDelayedStream.prototype.pause = function () {\n  this.source.pause();\n};\nDelayedStream.prototype.release = function () {\n  this._released = true;\n  this._bufferedEvents.forEach(function (args) {\n    this.emit.apply(this, args);\n  }.bind(this));\n  this._bufferedEvents = [];\n};\nDelayedStream.prototype.pipe = function () {\n  var r = Stream.prototype.pipe.apply(this, arguments);\n  this.resume();\n  return r;\n};\nDelayedStream.prototype._handleEmit = function (args) {\n  if (this._released) {\n    this.emit.apply(this, args);\n    return;\n  }\n  if (args[0] === 'data') {\n    this.dataSize += args[1].length;\n    this._checkIfMaxDataSizeExceeded();\n  }\n  this._bufferedEvents.push(args);\n};\nDelayedStream.prototype._checkIfMaxDataSizeExceeded = function () {\n  if (this._maxDataSizeExceeded) {\n    return;\n  }\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n  this._maxDataSizeExceeded = true;\n  var message = 'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n  this.emit('error', new Error(message));\n};","map":{"version":3,"names":["Stream","require","util","module","exports","DelayedStream","source","dataSize","maxDataSize","pauseStream","_maxDataSizeExceeded","_released","_bufferedEvents","inherits","create","options","delayedStream","option","realEmit","emit","_handleEmit","arguments","apply","on","pause","prototype","__defineGetter__","readable","resume","release","forEach","args","bind","pipe","r","length","_checkIfMaxDataSizeExceeded","push","message","Error"],"sources":["/Users/jaraga/CodeOp/perthesclinica/node_modules/delayed-stream/lib/delayed_stream.js"],"sourcesContent":["var Stream = require('stream').Stream;\nvar util = require('util');\n\nmodule.exports = DelayedStream;\nfunction DelayedStream() {\n  this.source = null;\n  this.dataSize = 0;\n  this.maxDataSize = 1024 * 1024;\n  this.pauseStream = true;\n\n  this._maxDataSizeExceeded = false;\n  this._released = false;\n  this._bufferedEvents = [];\n}\nutil.inherits(DelayedStream, Stream);\n\nDelayedStream.create = function(source, options) {\n  var delayedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    delayedStream[option] = options[option];\n  }\n\n  delayedStream.source = source;\n\n  var realEmit = source.emit;\n  source.emit = function() {\n    delayedStream._handleEmit(arguments);\n    return realEmit.apply(source, arguments);\n  };\n\n  source.on('error', function() {});\n  if (delayedStream.pauseStream) {\n    source.pause();\n  }\n\n  return delayedStream;\n};\n\nDelayedStream.prototype.__defineGetter__('readable', function() {\n  return this.source.readable;\n});\n\nDelayedStream.prototype.resume = function() {\n  if (!this._released) {\n    this.release();\n  }\n\n  this.source.resume();\n};\n\nDelayedStream.prototype.pause = function() {\n  this.source.pause();\n};\n\nDelayedStream.prototype.release = function() {\n  this._released = true;\n\n  this._bufferedEvents.forEach(function(args) {\n    this.emit.apply(this, args);\n  }.bind(this));\n  this._bufferedEvents = [];\n};\n\nDelayedStream.prototype.pipe = function() {\n  var r = Stream.prototype.pipe.apply(this, arguments);\n  this.resume();\n  return r;\n};\n\nDelayedStream.prototype._handleEmit = function(args) {\n  if (this._released) {\n    this.emit.apply(this, args);\n    return;\n  }\n\n  if (args[0] === 'data') {\n    this.dataSize += args[1].length;\n    this._checkIfMaxDataSizeExceeded();\n  }\n\n  this._bufferedEvents.push(args);\n};\n\nDelayedStream.prototype._checkIfMaxDataSizeExceeded = function() {\n  if (this._maxDataSizeExceeded) {\n    return;\n  }\n\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  this._maxDataSizeExceeded = true;\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.'\n  this.emit('error', new Error(message));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}