{"ast":null,"code":"// Load modules\n\nvar Http = require('http');\nvar NodeUtil = require('util');\nvar Hoek = require('hoek');\n\n// Declare internals\n\nvar internals = {};\nexports = module.exports = internals.Boom = function /* (new Error) or (code, message) */\n() {\n  var self = this;\n  Hoek.assert(this.constructor === internals.Boom, 'Error must be instantiated using new');\n  Error.call(this);\n  this.isBoom = true;\n  this.response = {\n    code: 0,\n    payload: {},\n    headers: {}\n    // type: 'content-type'\n  };\n\n  if (arguments[0] instanceof Error) {\n    // Error\n\n    var error = arguments[0];\n    this.data = error;\n    this.response.code = error.code || 500;\n    if (error.message) {\n      this.message = error.message;\n    }\n  } else {\n    // code, message\n\n    var code = arguments[0];\n    var message = arguments[1];\n    Hoek.assert(!isNaN(parseFloat(code)) && isFinite(code) && code >= 400, 'First argument must be a number (400+)');\n    this.response.code = code;\n    if (message) {\n      this.message = message;\n    }\n  }\n\n  // Response format\n\n  this.reformat();\n  return this;\n};\nNodeUtil.inherits(internals.Boom, Error);\ninternals.Boom.prototype.reformat = function () {\n  this.response.payload.code = this.response.code;\n  this.response.payload.error = Http.STATUS_CODES[this.response.code] || 'Unknown';\n  if (this.message) {\n    this.response.payload.message = Hoek.escapeHtml(this.message); // Prevent XSS from error message\n  }\n};\n\n// Utilities\n\ninternals.Boom.badRequest = function (message) {\n  return new internals.Boom(400, message);\n};\ninternals.Boom.unauthorized = function (message, scheme, attributes) {\n  // Or function (message, wwwAuthenticate[])\n\n  var err = new internals.Boom(401, message);\n  if (!scheme) {\n    return err;\n  }\n  var wwwAuthenticate = '';\n  if (typeof scheme === 'string') {\n    // function (message, scheme, attributes)\n\n    wwwAuthenticate = scheme;\n    if (attributes) {\n      var names = Object.keys(attributes);\n      for (var i = 0, il = names.length; i < il; ++i) {\n        if (i) {\n          wwwAuthenticate += ',';\n        }\n        var value = attributes[names[i]];\n        if (value === null || value === undefined) {\n          // Value can be zero\n\n          value = '';\n        }\n        wwwAuthenticate += ' ' + names[i] + '=\"' + Hoek.escapeHeaderAttribute(value.toString()) + '\"';\n      }\n    }\n    if (message) {\n      if (attributes) {\n        wwwAuthenticate += ',';\n      }\n      wwwAuthenticate += ' error=\"' + Hoek.escapeHeaderAttribute(message) + '\"';\n    } else {\n      err.isMissing = true;\n    }\n  } else {\n    // function (message, wwwAuthenticate[])\n\n    var wwwArray = scheme;\n    for (var i = 0, il = wwwArray.length; i < il; ++i) {\n      if (i) {\n        wwwAuthenticate += ', ';\n      }\n      wwwAuthenticate += wwwArray[i];\n    }\n  }\n  err.response.headers['WWW-Authenticate'] = wwwAuthenticate;\n  return err;\n};\ninternals.Boom.clientTimeout = function (message) {\n  return new internals.Boom(408, message);\n};\ninternals.Boom.serverTimeout = function (message) {\n  return new internals.Boom(503, message);\n};\ninternals.Boom.forbidden = function (message) {\n  return new internals.Boom(403, message);\n};\ninternals.Boom.notFound = function (message) {\n  return new internals.Boom(404, message);\n};\ninternals.Boom.internal = function (message, data) {\n  var err = new internals.Boom(500, message);\n  if (data && data.stack) {\n    err.trace = data.stack.split('\\n');\n    err.outterTrace = Hoek.displayStack(1);\n  } else {\n    err.trace = Hoek.displayStack(1);\n  }\n  err.data = data;\n  err.response.payload.message = 'An internal server error occurred'; // Hide actual error from user\n\n  return err;\n};\ninternals.Boom.passThrough = function (code, payload, contentType, headers) {\n  var err = new internals.Boom(500, 'Pass-through'); // 500 code is only used to initialize\n\n  err.data = {\n    code: code,\n    payload: payload,\n    type: contentType\n  };\n  err.response.code = code;\n  err.response.type = contentType;\n  err.response.headers = headers;\n  err.response.payload = payload;\n  return err;\n};","map":{"version":3,"names":["Http","require","NodeUtil","Hoek","internals","exports","module","Boom","self","assert","constructor","Error","call","isBoom","response","code","payload","headers","arguments","error","data","message","isNaN","parseFloat","isFinite","reformat","inherits","prototype","STATUS_CODES","escapeHtml","badRequest","unauthorized","scheme","attributes","err","wwwAuthenticate","names","Object","keys","i","il","length","value","undefined","escapeHeaderAttribute","toString","isMissing","wwwArray","clientTimeout","serverTimeout","forbidden","notFound","internal","stack","trace","split","outterTrace","displayStack","passThrough","contentType","type"],"sources":["/Users/jaraga/CodeOp/perthesclinica/node_modules/boom/lib/index.js"],"sourcesContent":["// Load modules\n\nvar Http = require('http');\nvar NodeUtil = require('util');\nvar Hoek = require('hoek');\n\n\n// Declare internals\n\nvar internals = {};\n\n\nexports = module.exports = internals.Boom = function (/* (new Error) or (code, message) */) {\n\n    var self = this;\n\n    Hoek.assert(this.constructor === internals.Boom, 'Error must be instantiated using new');\n\n    Error.call(this);\n    this.isBoom = true;\n\n    this.response = {\n        code: 0,\n        payload: {},\n        headers: {}\n        // type: 'content-type'\n    };\n\n    if (arguments[0] instanceof Error) {\n\n        // Error\n\n        var error = arguments[0];\n\n        this.data = error;\n        this.response.code = error.code || 500;\n        if (error.message) {\n            this.message = error.message;\n        }\n    }\n    else {\n\n        // code, message\n\n        var code = arguments[0];\n        var message = arguments[1];\n\n        Hoek.assert(!isNaN(parseFloat(code)) && isFinite(code) && code >= 400, 'First argument must be a number (400+)');\n\n        this.response.code = code;\n        if (message) {\n            this.message = message;\n        }\n    }\n\n    // Response format\n\n    this.reformat();\n\n    return this;\n};\n\nNodeUtil.inherits(internals.Boom, Error);\n\n\ninternals.Boom.prototype.reformat = function () {\n\n    this.response.payload.code = this.response.code;\n    this.response.payload.error = Http.STATUS_CODES[this.response.code] || 'Unknown';\n    if (this.message) {\n        this.response.payload.message = Hoek.escapeHtml(this.message);         // Prevent XSS from error message\n    }\n};\n\n\n// Utilities\n\ninternals.Boom.badRequest = function (message) {\n\n    return new internals.Boom(400, message);\n};\n\n\ninternals.Boom.unauthorized = function (message, scheme, attributes) {          // Or function (message, wwwAuthenticate[])\n\n    var err = new internals.Boom(401, message);\n\n    if (!scheme) {\n        return err;\n    }\n\n    var wwwAuthenticate = '';\n\n    if (typeof scheme === 'string') {\n\n        // function (message, scheme, attributes)\n\n        wwwAuthenticate = scheme;\n        if (attributes) {\n            var names = Object.keys(attributes);\n            for (var i = 0, il = names.length; i < il; ++i) {\n                if (i) {\n                    wwwAuthenticate += ',';\n                }\n\n                var value = attributes[names[i]];\n                if (value === null ||\n                    value === undefined) {              // Value can be zero\n\n                    value = '';\n                }\n                wwwAuthenticate += ' ' + names[i] + '=\"' + Hoek.escapeHeaderAttribute(value.toString()) + '\"';\n            }\n        }\n\n        if (message) {\n            if (attributes) {\n                wwwAuthenticate += ',';\n            }\n            wwwAuthenticate += ' error=\"' + Hoek.escapeHeaderAttribute(message) + '\"';\n        }\n        else {\n            err.isMissing = true;\n        }\n    }\n    else {\n\n        // function (message, wwwAuthenticate[])\n\n        var wwwArray = scheme;\n        for (var i = 0, il = wwwArray.length; i < il; ++i) {\n            if (i) {\n                wwwAuthenticate += ', ';\n            }\n\n            wwwAuthenticate += wwwArray[i];\n        }\n    }\n\n    err.response.headers['WWW-Authenticate'] = wwwAuthenticate;\n\n    return err;\n};\n\n\ninternals.Boom.clientTimeout = function (message) {\n\n    return new internals.Boom(408, message);\n};\n\n\ninternals.Boom.serverTimeout = function (message) {\n\n    return new internals.Boom(503, message);\n};\n\n\ninternals.Boom.forbidden = function (message) {\n\n    return new internals.Boom(403, message);\n};\n\n\ninternals.Boom.notFound = function (message) {\n\n    return new internals.Boom(404, message);\n};\n\n\ninternals.Boom.internal = function (message, data) {\n\n    var err = new internals.Boom(500, message);\n\n    if (data && data.stack) {\n        err.trace = data.stack.split('\\n');\n        err.outterTrace = Hoek.displayStack(1);\n    }\n    else {\n        err.trace = Hoek.displayStack(1);\n    }\n\n    err.data = data;\n    err.response.payload.message = 'An internal server error occurred';                     // Hide actual error from user\n\n    return err;\n};\n\n\ninternals.Boom.passThrough = function (code, payload, contentType, headers) {\n\n    var err = new internals.Boom(500, 'Pass-through');                                      // 500 code is only used to initialize\n\n    err.data = {\n        code: code,\n        payload: payload,\n        type: contentType\n    };\n\n    err.response.code = code;\n    err.response.type = contentType;\n    err.response.headers = headers;\n    err.response.payload = payload;\n\n    return err;\n};\n\n\n"],"mappings":"AAAA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC1B,IAAIC,QAAQ,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC9B,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;;AAG1B;;AAEA,IAAIG,SAAS,GAAG,CAAC,CAAC;AAGlBC,OAAO,GAAGC,MAAM,CAACD,OAAO,GAAGD,SAAS,CAACG,IAAI,GAAG,SAAU;AAAA,GAAsC;EAExF,IAAIC,IAAI,GAAG,IAAI;EAEfL,IAAI,CAACM,MAAM,CAAC,IAAI,CAACC,WAAW,KAAKN,SAAS,CAACG,IAAI,EAAE,sCAAsC,CAAC;EAExFI,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAI,CAACC,MAAM,GAAG,IAAI;EAElB,IAAI,CAACC,QAAQ,GAAG;IACZC,IAAI,EAAE,CAAC;IACPC,OAAO,EAAE,CAAC,CAAC;IACXC,OAAO,EAAE,CAAC;IACV;EACJ,CAAC;;EAED,IAAIC,SAAS,CAAC,CAAC,CAAC,YAAYP,KAAK,EAAE;IAE/B;;IAEA,IAAIQ,KAAK,GAAGD,SAAS,CAAC,CAAC,CAAC;IAExB,IAAI,CAACE,IAAI,GAAGD,KAAK;IACjB,IAAI,CAACL,QAAQ,CAACC,IAAI,GAAGI,KAAK,CAACJ,IAAI,IAAI,GAAG;IACtC,IAAII,KAAK,CAACE,OAAO,EAAE;MACf,IAAI,CAACA,OAAO,GAAGF,KAAK,CAACE,OAAO;IAChC;EACJ,CAAC,MACI;IAED;;IAEA,IAAIN,IAAI,GAAGG,SAAS,CAAC,CAAC,CAAC;IACvB,IAAIG,OAAO,GAAGH,SAAS,CAAC,CAAC,CAAC;IAE1Bf,IAAI,CAACM,MAAM,CAAC,CAACa,KAAK,CAACC,UAAU,CAACR,IAAI,CAAC,CAAC,IAAIS,QAAQ,CAACT,IAAI,CAAC,IAAIA,IAAI,IAAI,GAAG,EAAE,wCAAwC,CAAC;IAEhH,IAAI,CAACD,QAAQ,CAACC,IAAI,GAAGA,IAAI;IACzB,IAAIM,OAAO,EAAE;MACT,IAAI,CAACA,OAAO,GAAGA,OAAO;IAC1B;EACJ;;EAEA;;EAEA,IAAI,CAACI,QAAQ,EAAE;EAEf,OAAO,IAAI;AACf,CAAC;AAEDvB,QAAQ,CAACwB,QAAQ,CAACtB,SAAS,CAACG,IAAI,EAAEI,KAAK,CAAC;AAGxCP,SAAS,CAACG,IAAI,CAACoB,SAAS,CAACF,QAAQ,GAAG,YAAY;EAE5C,IAAI,CAACX,QAAQ,CAACE,OAAO,CAACD,IAAI,GAAG,IAAI,CAACD,QAAQ,CAACC,IAAI;EAC/C,IAAI,CAACD,QAAQ,CAACE,OAAO,CAACG,KAAK,GAAGnB,IAAI,CAAC4B,YAAY,CAAC,IAAI,CAACd,QAAQ,CAACC,IAAI,CAAC,IAAI,SAAS;EAChF,IAAI,IAAI,CAACM,OAAO,EAAE;IACd,IAAI,CAACP,QAAQ,CAACE,OAAO,CAACK,OAAO,GAAGlB,IAAI,CAAC0B,UAAU,CAAC,IAAI,CAACR,OAAO,CAAC,CAAC,CAAS;EAC3E;AACJ,CAAC;;AAGD;;AAEAjB,SAAS,CAACG,IAAI,CAACuB,UAAU,GAAG,UAAUT,OAAO,EAAE;EAE3C,OAAO,IAAIjB,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEc,OAAO,CAAC;AAC3C,CAAC;AAGDjB,SAAS,CAACG,IAAI,CAACwB,YAAY,GAAG,UAAUV,OAAO,EAAEW,MAAM,EAAEC,UAAU,EAAE;EAAW;;EAE5E,IAAIC,GAAG,GAAG,IAAI9B,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEc,OAAO,CAAC;EAE1C,IAAI,CAACW,MAAM,EAAE;IACT,OAAOE,GAAG;EACd;EAEA,IAAIC,eAAe,GAAG,EAAE;EAExB,IAAI,OAAOH,MAAM,KAAK,QAAQ,EAAE;IAE5B;;IAEAG,eAAe,GAAGH,MAAM;IACxB,IAAIC,UAAU,EAAE;MACZ,IAAIG,KAAK,GAAGC,MAAM,CAACC,IAAI,CAACL,UAAU,CAAC;MACnC,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGJ,KAAK,CAACK,MAAM,EAAEF,CAAC,GAAGC,EAAE,EAAE,EAAED,CAAC,EAAE;QAC5C,IAAIA,CAAC,EAAE;UACHJ,eAAe,IAAI,GAAG;QAC1B;QAEA,IAAIO,KAAK,GAAGT,UAAU,CAACG,KAAK,CAACG,CAAC,CAAC,CAAC;QAChC,IAAIG,KAAK,KAAK,IAAI,IACdA,KAAK,KAAKC,SAAS,EAAE;UAAe;;UAEpCD,KAAK,GAAG,EAAE;QACd;QACAP,eAAe,IAAI,GAAG,GAAGC,KAAK,CAACG,CAAC,CAAC,GAAG,IAAI,GAAGpC,IAAI,CAACyC,qBAAqB,CAACF,KAAK,CAACG,QAAQ,EAAE,CAAC,GAAG,GAAG;MACjG;IACJ;IAEA,IAAIxB,OAAO,EAAE;MACT,IAAIY,UAAU,EAAE;QACZE,eAAe,IAAI,GAAG;MAC1B;MACAA,eAAe,IAAI,UAAU,GAAGhC,IAAI,CAACyC,qBAAqB,CAACvB,OAAO,CAAC,GAAG,GAAG;IAC7E,CAAC,MACI;MACDa,GAAG,CAACY,SAAS,GAAG,IAAI;IACxB;EACJ,CAAC,MACI;IAED;;IAEA,IAAIC,QAAQ,GAAGf,MAAM;IACrB,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEC,EAAE,GAAGO,QAAQ,CAACN,MAAM,EAAEF,CAAC,GAAGC,EAAE,EAAE,EAAED,CAAC,EAAE;MAC/C,IAAIA,CAAC,EAAE;QACHJ,eAAe,IAAI,IAAI;MAC3B;MAEAA,eAAe,IAAIY,QAAQ,CAACR,CAAC,CAAC;IAClC;EACJ;EAEAL,GAAG,CAACpB,QAAQ,CAACG,OAAO,CAAC,kBAAkB,CAAC,GAAGkB,eAAe;EAE1D,OAAOD,GAAG;AACd,CAAC;AAGD9B,SAAS,CAACG,IAAI,CAACyC,aAAa,GAAG,UAAU3B,OAAO,EAAE;EAE9C,OAAO,IAAIjB,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEc,OAAO,CAAC;AAC3C,CAAC;AAGDjB,SAAS,CAACG,IAAI,CAAC0C,aAAa,GAAG,UAAU5B,OAAO,EAAE;EAE9C,OAAO,IAAIjB,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEc,OAAO,CAAC;AAC3C,CAAC;AAGDjB,SAAS,CAACG,IAAI,CAAC2C,SAAS,GAAG,UAAU7B,OAAO,EAAE;EAE1C,OAAO,IAAIjB,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEc,OAAO,CAAC;AAC3C,CAAC;AAGDjB,SAAS,CAACG,IAAI,CAAC4C,QAAQ,GAAG,UAAU9B,OAAO,EAAE;EAEzC,OAAO,IAAIjB,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEc,OAAO,CAAC;AAC3C,CAAC;AAGDjB,SAAS,CAACG,IAAI,CAAC6C,QAAQ,GAAG,UAAU/B,OAAO,EAAED,IAAI,EAAE;EAE/C,IAAIc,GAAG,GAAG,IAAI9B,SAAS,CAACG,IAAI,CAAC,GAAG,EAAEc,OAAO,CAAC;EAE1C,IAAID,IAAI,IAAIA,IAAI,CAACiC,KAAK,EAAE;IACpBnB,GAAG,CAACoB,KAAK,GAAGlC,IAAI,CAACiC,KAAK,CAACE,KAAK,CAAC,IAAI,CAAC;IAClCrB,GAAG,CAACsB,WAAW,GAAGrD,IAAI,CAACsD,YAAY,CAAC,CAAC,CAAC;EAC1C,CAAC,MACI;IACDvB,GAAG,CAACoB,KAAK,GAAGnD,IAAI,CAACsD,YAAY,CAAC,CAAC,CAAC;EACpC;EAEAvB,GAAG,CAACd,IAAI,GAAGA,IAAI;EACfc,GAAG,CAACpB,QAAQ,CAACE,OAAO,CAACK,OAAO,GAAG,mCAAmC,CAAC,CAAqB;;EAExF,OAAOa,GAAG;AACd,CAAC;AAGD9B,SAAS,CAACG,IAAI,CAACmD,WAAW,GAAG,UAAU3C,IAAI,EAAEC,OAAO,EAAE2C,WAAW,EAAE1C,OAAO,EAAE;EAExE,IAAIiB,GAAG,GAAG,IAAI9B,SAAS,CAACG,IAAI,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC,CAAsC;;EAExF2B,GAAG,CAACd,IAAI,GAAG;IACPL,IAAI,EAAEA,IAAI;IACVC,OAAO,EAAEA,OAAO;IAChB4C,IAAI,EAAED;EACV,CAAC;EAEDzB,GAAG,CAACpB,QAAQ,CAACC,IAAI,GAAGA,IAAI;EACxBmB,GAAG,CAACpB,QAAQ,CAAC8C,IAAI,GAAGD,WAAW;EAC/BzB,GAAG,CAACpB,QAAQ,CAACG,OAAO,GAAGA,OAAO;EAC9BiB,GAAG,CAACpB,QAAQ,CAACE,OAAO,GAAGA,OAAO;EAE9B,OAAOkB,GAAG;AACd,CAAC"},"metadata":{},"sourceType":"script"}